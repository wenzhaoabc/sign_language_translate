import{d as N,k as R,l as A,i as g,m as v,j as T,r as a,o as U,c as B,b as o,w as t,a as E,e as w,u as b,n as L,q,F as z,s as H,v as M,H as I,E as K,x as $}from"./index-ad80de0e.js";import{u as j,a as D}from"./keepAlive-ceef8fc5.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";const G={class:"login-btn"},J=N({__name:"LoginForm",setup(P){const y=R(),d=A(),k=j(),F=D(),l=g(),x=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),i=g(!1),n=v({username:"",password:""}),c=e=>{e&&e.validate(async s=>{if(s){i.value=!0;try{const{data:u}=await H({...n,password:n.password});d.setToken(""),d.setUserInfo(u),await M(),k.closeMultipleTab(),F.setKeepAliveName(),y.push(I),K({title:$(),message:"欢迎登录 SignHear",type:"success",duration:3e3})}finally{i.value=!1}}})},V=e=>{e&&e.resetFields()};return T(()=>{document.onkeydown=e=>{if(e=window.event||e,e.code==="Enter"||e.code==="enter"||e.code==="NumpadEnter"){if(i.value)return;c(l.value)}}}),(e,s)=>{const u=a("user"),p=a("el-icon"),_=a("el-input"),m=a("el-form-item"),S=a("lock"),C=a("el-form"),f=a("el-button");return U(),B(z,null,[o(C,{ref_key:"loginFormRef",ref:l,model:n,rules:x,size:"large"},{default:t(()=>[o(m,{prop:"username"},{default:t(()=>[o(_,{modelValue:n.username,"onUpdate:modelValue":s[0]||(s[0]=r=>n.username=r),placeholder:"用户名：15294773148"},{prefix:t(()=>[o(p,{class:"el-input__icon"},{default:t(()=>[o(u)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:t(()=>[o(_,{modelValue:n.password,"onUpdate:modelValue":s[1]||(s[1]=r=>n.password=r),type:"password",placeholder:"密码：123ABCabc","show-password":"",autocomplete:"new-password"},{prefix:t(()=>[o(p,{class:"el-input__icon"},{default:t(()=>[o(S)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),E("div",G,[o(f,{icon:b(L),round:"",size:"large",onClick:s[2]||(s[2]=r=>V(l.value))},{default:t(()=>[w(" 重置 ")]),_:1},8,["icon"]),o(f,{icon:b(q),round:"",size:"large",type:"primary",loading:i.value,onClick:s[3]||(s[3]=r=>c(l.value))},{default:t(()=>[w(" 登录 ")]),_:1},8,["icon","loading"])])],64)}}});const Y=O(J,[["__scopeId","data-v-46bac17b"]]);export{Y as default};
